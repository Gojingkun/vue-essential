{"version":3,"file":"js/936.6d28620a.js","mappings":"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","sources":["webpack://vuejs-essential/./src/views/auth/Login.vue","webpack://vuejs-essential/src/views/auth/Login.vue","webpack://vuejs-essential/./src/views/auth/Login.vue?3774","webpack://vuejs-essential/./src/views/auth/Login.vue?32b5","webpack://vuejs-essential/./src/api/auth.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4 col-md-offset-4 floating-box\"},[_c('Message',{attrs:{\"show\":_vm.msgShow,\"type\":_vm.msgType,\"msg\":_vm.msg},on:{\"update:show\":function($event){_vm.msgShow=$event}}}),_c('div',{staticClass:\"panel panel-default\"},[_vm._m(0),_c('div',{staticClass:\"panel-body\",attrs:{\"data-validator-form\":\"\"}},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"用户名\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.username),expression:\"username\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ title: '用户名' }),expression:\"{ title: '用户名' }\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"请填写用户名\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.password),expression:\"password\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ title: '密码' }),expression:\"{ title: '密码' }\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"id\":\"password\",\"type\":\"password\",\"placeholder\":\"请填写密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('br'),_c('button',{staticClass:\"btn btn-lg btn-success btn-block\",attrs:{\"type\":\"submit\"},on:{\"click\":_vm.login}},[_c('i',{staticClass:\"fa fa-btn fa-sign-in\"}),_vm._v(\" 登录 \")])])])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel-heading\"},[_c('h3',{staticClass:\"panel-title\"},[_vm._v(\"请登录\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"row\">\n        <div class=\"col-md-4 col-md-offset-4 floating-box\">\n            <Message :show.sync=\"msgShow\" :type=\"msgType\" :msg=\"msg\"/>\n\n            <div class=\"panel panel-default\">\n                <div class=\"panel-heading\">\n                    <h3 class=\"panel-title\">请登录</h3>\n                </div>\n\n                <div class=\"panel-body\" data-validator-form>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">用户名</label>\n                        <input v-model.trim=\"username\" v-validator.required=\"{ title: '用户名' }\" type=\"text\"\n                               class=\"form-control\" placeholder=\"请填写用户名\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">密码</label>\n                        <input v-model.trim=\"password\" id=\"password\" v-validator.required=\"{ title: '密码' }\"\n                               type=\"password\" class=\"form-control\" placeholder=\"请填写密码\">\n                    </div>\n                    <br>\n                    <button @click=\"login\" type=\"submit\" class=\"btn btn-lg btn-success btn-block\">\n                        <i class=\"fa fa-btn fa-sign-in\"></i> 登录\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {login} from \"@/api/auth.js\";\n    import {getCurrentUser} from \"../../api/user\";\n    import router from \"../../router\";\n\n    export default {\n        name: 'Login',\n        data() {\n            return {\n                username: '', // 用户名\n                password: '', // 密码\n                msg: '', // 消息\n                msgType: '', // 消息类型\n                msgShow: false // 是否显示消息，默认不显示\n            }\n        },\n        methods: {\n            login(e) {\n                setTimeout(() => {\n                    const target = e.target.type === 'submit' ? e.target : e.target.parentElement\n\n                    if (target.canSubmit) {\n                        this.submit()\n                    }\n                })\n            },\n            submit() {\n                // 表单里的用户信息\n                const user = {\n                    username: this.username,\n                    password: this.password\n                }\n                login(user).then((res) => {\n                    // 匹配时，分发 login 事件进行登录\n                    this.$store.dispatch('login', res.data)\n                    getCurrentUser({}).then((res)=> {\n                        // 更新用户信息\n                        this.$store.dispatch('getUser', res.data)\n                        router.push('/')\n                    })\n                }).catch(err => {\n                    this.showMsg('用户名或密码不正确')\n                });\n            },\n            showMsg(msg, type = 'warning') {\n                this.msg = msg\n                this.msgType = type\n                this.msgShow = false\n\n                this.$nextTick(() => {\n                    this.msgShow = true\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=4db28050&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4db28050\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request.js'\n\n// 分别暴露的方式暴露内容\nexport const register = (data) => {\n    // 返回请求的数据\n    return request({\n        // 配置请求方式\n        method: 'POST',// GET/POSH\n        // 请求接口地址\n        url: '/h5users',\n        // 要传递的参数\n        data: data\n    })\n}\n\n// 分别暴露的方式暴露内容\nexport const login = (data) => {\n    // 返回请求的数据\n    return request({\n        // 配置请求方式\n        method: 'POST',// GET/POSH\n        // 请求接口地址\n        url: '/web/authorizations',\n        // 要传递的参数\n        data: data\n    })\n}"],"names":["render","_vm","this","_c","_self","staticClass","attrs","msgShow","msgType","msg","on","$event","_m","_v","directives","name","rawName","value","username","expression","modifiers","title","domProps","target","composing","trim","$forceUpdate","password","login","staticRenderFns","data","methods","setTimeout","submit","getCurrentUser","router","catch","err","showMsg","component","register","request","method","url"],"sourceRoot":""}