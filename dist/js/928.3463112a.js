"use strict";(self["webpackChunkvuejs_essential"]=self["webpackChunkvuejs_essential"]||[]).push([[928],{7928:function(t,a,s){s.r(a),s.d(a,{default:function(){return d}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 col-md-offset-4 floating-box"},[a("Message",{attrs:{show:t.msgShow,type:t.msgType,msg:t.msg},on:{"update:show":function(a){t.msgShow=a}}}),a("div",{staticClass:"panel panel-default"},[t._m(0),a("div",{staticClass:"panel-body",attrs:{"data-validator-form":""}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("用户名")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:input.required",value:{regex:/^[a-zA-Z]+\w*\s?\w*$/,error:"用户名要求以字母开头的单词字符"},expression:"{ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }",arg:"input",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写用户名"},domProps:{value:t.username},on:{input:function(a){a.target.composing||(t.username=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("密码")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{regex:/^\w{6,16}$/,error:"密码要求 6 ~ 16 个单词字符"},expression:"{ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"请填写密码"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("确认密码")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cpassword,expression:"cpassword",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{target:"#password"},expression:"{ target: '#password' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"password",placeholder:"请填写确认密码"},domProps:{value:t.cpassword},on:{input:function(a){a.target.composing||(t.cpassword=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"control-label"},[t._v("图片验证码")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.captcha,expression:"captcha",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{title:"图片验证码"},expression:"{ title: '图片验证码' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写验证码"},domProps:{value:t.captcha},on:{input:function(a){a.target.composing||(t.captcha=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}})]),a("div",{staticClass:"thumbnail",attrs:{title:"点击图片重新获取验证码"},on:{click:t.getCaptcha}},[a("div",{staticClass:"captcha vcenter",domProps:{innerHTML:t._s(t.captchaTpl)}})]),a("span",{on:{click:t.register}},[t._m(1)])])])],1)])},r=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"panel-heading"},[a("h3",{staticClass:"panel-title"},[t._v("请注册")])])},function(){var t=this,a=t._self._c;return a("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"}},[a("i",{staticClass:"fa fa-btn fa-sign-in"}),t._v(" 注册 ")])}];function i(t=6,a="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890"){let s="",e=[];try{e=[...Array(t)].map((()=>a[Math.floor(Math.random()*a.length)]))}catch(r){}return e.forEach((t=>{s+=`<span class="flex1 hcenter">${t}</span>`})),e=e.join(""),{tpl:s,captcha:e}}var o=s(9895),n=s(1333),l={name:"Register",data(){return{captchaTpl:"",username:"",password:"",cpassword:"",captcha:"",msg:"",msgType:"",msgShow:!1}},created(){this.getCaptcha()},methods:{getCaptcha(){const{tpl:t,captcha:a}=i(6);this.captchaTpl=t,this.localCaptcha=a},register(t){this.$nextTick((()=>{const a="submit"===t.target.type?t.target:t.target.parentElement;a.canSubmit&&this.submit()}))},submit(){if(this.captcha.toUpperCase()!==this.localCaptcha)this.showMsg("验证码不正确"),this.getCaptcha();else{const t={name:this.username,password:this.password};(0,o.z)(t).then((t=>{this.showMsg("注册成功"),n.Z.push("/auth/login")})).catch((t=>{this.showMsg("用户名已存在")}))}},login(t){this.$store.dispatch("login",t),this.showMsg("注册成功","success")},showMsg(t,a="warning"){this.msg=t,this.msgType=a,this.msgShow=!1,this.$nextTick((()=>{this.msgShow=!0}))}}},c=l,p=s(1001),u=(0,p.Z)(c,e,r,!1,null,"61647f72",null),d=u.exports},9895:function(t,a,s){s.d(a,{x:function(){return i},z:function(){return r}});var e=s(4471);const r=t=>(0,e.Z)({method:"POST",url:"/h5users",data:t}),i=t=>(0,e.Z)({method:"POST",url:"/web/authorizations",data:t})}}]);
//# sourceMappingURL=928.3463112a.js.map