"use strict";(self["webpackChunkvuejs_essential"]=self["webpackChunkvuejs_essential"]||[]).push([[732],{9732:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"panel panel-default list-panel search-results"},[s("div",{staticClass:"panel-heading"},[s("h3",{staticClass:"panel-title"},[s("i",{staticClass:"fa fa-search"}),t._v(" 关于 “"),s("span",{staticClass:"highlight"},[t._v(t._s(t.keyword))]),t._v("” 的搜索结果, 共 "+t._s(t.results.length)+" 条 ")]),s("div",{staticClass:"pull-right",staticStyle:{"margin-top":"-10px"}},t._l(t.filters,(function(e){return s("button",{staticClass:"btn btn-default btn-sm",attrs:{disabled:e.filter===t.filter,href:"javascript:;"},on:{click:function(s){return t.getArticlesByKeyword(t.keyword,e.filter)}}},[s("i",{class:`fa fa-${e.icon}`}),t._v(" "+t._s(e.title)+" ")])})),0)]),s("div",{staticClass:"panel-body"},[t._l(t.results,(function(e){return s("div",{staticClass:"result"},[s("h2",{staticClass:"title"},[s("router-link",{attrs:{to:`/articles/${e.id}/content`}},[s("span",{domProps:{innerHTML:t._s(e.title)}})]),s("small",[t._v("by")]),s("router-link",{attrs:{to:`/${e.user.name}`}},[s("img",{staticClass:"avatar avatar-small",attrs:{src:e.user.avatar}}),s("small",[t._v(t._s(e.user.name))])])],1),s("div",{staticClass:"info"},[s("span",{staticClass:"url"},[s("router-link",{attrs:{to:`/articles/${e.id}/content`}},[t._v(" "+t._s(e.url)+" ")])],1),s("span",{staticClass:"date"},[t._v(" "+t._s(t._f("moment")(e.created_at,"from",{startOf:"minute"}))+" ⋅ "),s("i",{staticClass:"fa fa-thumbs-o-up"}),t._v(" "+t._s(e.likeUser&&e.likeUser.length||0)+" ⋅ "),s("i",{staticClass:"fa fa-comments-o"}),t._v(" "+t._s(e.replies&&e.replies.length||0)+" ")])]),s("div",{staticClass:"desc",domProps:{innerHTML:t._s(e.body)}}),s("hr")])})),t.results.length?t._e():s("div",{staticClass:"empty-block"},[t._v(" 没有任何数据~~ ")])],2)])},i=[],r=e(399),l={name:"Search",data(){return{keyword:"",results:[],filter:"default",filters:[{filter:"default",title:"相关性排序",icon:"random"},{filter:"vote",title:"点赞数排序",icon:"thumbs-up"}]}},beforeRouteEnter(t,s,e){e((s=>{s.getArticlesByKeyword(t.query.q)}))},beforeRouteUpdate(t,s,e){this.getArticlesByKeyword(t.query.q),e()},beforeRouteLeave(t,s,e){this.$store.commit("UPDATE_SEARCH_VALUE",""),e()},methods:{getArticlesByKeyword(t,s){if(t){this.keyword=t,s&&(this.filter=s);let e={include:"user,category,likeUser,replies",keyword:t,filter:this.filter};(0,r.yC)(e).then((s=>{this.results=this.heightLight(s.data,t)}))}},heightLight(t,s){let e=[];return Array.isArray(t)&&t.forEach((t=>{let{id:a,title:i,body:r}=t;const l=new RegExp(`(${s})`,"gi");if(-1!==i.indexOf(s)||-1!==r.indexOf(s)){const s=`${this.$store.state.origin}/articles/${a}/content`;i=i.replace(l,'<span class="highlight">$1</span>'),r=r.substr(0,100).replace(l,'<span class="highlight">$1</span>'),e.push({...t,url:s,title:i,body:r})}})),e}}},n=l,c=e(1001),o=(0,c.Z)(n,a,i,!1,null,"0b444bd8",null),u=o.exports}}]);
//# sourceMappingURL=732.30f143d1.js.map