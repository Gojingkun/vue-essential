{"version":3,"file":"js/928.65ac0ba8.js","mappings":"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","sources":["webpack://vuejs-essential/./src/views/auth/Register.vue","webpack://vuejs-essential/./src/utils/createCaptcha.js","webpack://vuejs-essential/src/views/auth/Register.vue","webpack://vuejs-essential/./src/views/auth/Register.vue?db82","webpack://vuejs-essential/./src/views/auth/Register.vue?36cb","webpack://vuejs-essential/./src/api/auth.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-4 col-md-offset-4 floating-box\"},[_c('Message',{attrs:{\"show\":_vm.msgShow,\"type\":_vm.msgType,\"msg\":_vm.msg},on:{\"update:show\":function($event){_vm.msgShow=$event}}}),_c('div',{staticClass:\"panel panel-default\"},[_vm._m(0),_c('div',{staticClass:\"panel-body\",attrs:{\"data-validator-form\":\"\"}},[_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"用户名\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.username),expression:\"username\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator:input.required\",value:({ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }),expression:\"{ regex: /^[a-zA-Z]+\\\\w*\\\\s?\\\\w*$/, error: '用户名要求以字母开头的单词字符' }\",arg:\"input\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"请填写用户名\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing)return;_vm.username=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.password),expression:\"password\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }),expression:\"{ regex: /^\\\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"id\":\"password\",\"type\":\"password\",\"placeholder\":\"请填写密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.password=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"确认密码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.cpassword),expression:\"cpassword\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ target: '#password' }),expression:\"{ target: '#password' }\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"placeholder\":\"请填写确认密码\"},domProps:{\"value\":(_vm.cpassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.cpassword=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',{staticClass:\"control-label\"},[_vm._v(\"图片验证码\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.captcha),expression:\"captcha\",modifiers:{\"trim\":true}},{name:\"validator\",rawName:\"v-validator.required\",value:({ title: '图片验证码' }),expression:\"{ title: '图片验证码' }\",modifiers:{\"required\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"请填写验证码\"},domProps:{\"value\":(_vm.captcha)},on:{\"input\":function($event){if($event.target.composing)return;_vm.captcha=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"thumbnail\",attrs:{\"title\":\"点击图片重新获取验证码\"},on:{\"click\":_vm.getCaptcha}},[_c('div',{staticClass:\"captcha vcenter\",domProps:{\"innerHTML\":_vm._s(_vm.captchaTpl)}})]),_c('span',{on:{\"click\":_vm.register}},[_vm._m(1)])])])],1)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel-heading\"},[_c('h3',{staticClass:\"panel-title\"},[_vm._v(\"请注册\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('button',{staticClass:\"btn btn-lg btn-success btn-block\",attrs:{\"type\":\"submit\"}},[_c('i',{staticClass:\"fa fa-btn fa-sign-in\"}),_vm._v(\" 注册 \")])\n}]\n\nexport { render, staticRenderFns }","export default function(num = 6, letters = 'QWERTYUIOPLKJHGFDSAZXCVBNM1234567890') {\n    let tpl = ''\n    let captcha = []\n\n    try {\n        captcha = [...Array(num)].map(() => letters[Math.floor(Math.random() * letters.length)])\n    } catch (e) {}\n\n    captcha.forEach(item => {\n        tpl += `<span class=\"flex1 hcenter\">${item}</span>`\n    })\n\n    captcha = captcha.join('')\n\n    return {\n        tpl,\n        captcha\n    }\n}\n","<template>\n    <div class=\"row\">\n        <div class=\"col-md-4 col-md-offset-4 floating-box\">\n            <!-- 消息组件 -->\n            <Message :show.sync=\"msgShow\" :type=\"msgType\" :msg=\"msg\"/>\n            <div class=\"panel panel-default\">\n                <div class=\"panel-heading\">\n                    <h3 class=\"panel-title\">请注册</h3>\n                </div>\n\n                <div class=\"panel-body\" data-validator-form>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">用户名</label>\n                        <input v-model.trim=\"username\"\n                               v-validator:input.required=\"{ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }\"\n                               type=\"text\" class=\"form-control\" placeholder=\"请填写用户名\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">密码</label>\n                        <input id=\"password\" v-model.trim=\"password\"\n                               v-validator.required=\"{ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }\"\n                               type=\"password\" class=\"form-control\" placeholder=\"请填写密码\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">确认密码</label>\n                        <input v-model.trim=\"cpassword\" v-validator.required=\"{ target: '#password' }\" type=\"password\"\n                               class=\"form-control\" placeholder=\"请填写确认密码\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label class=\"control-label\">图片验证码</label>\n                        <input v-model.trim=\"captcha\" v-validator.required=\"{ title: '图片验证码' }\" type=\"text\"\n                               class=\"form-control\" placeholder=\"请填写验证码\">\n                    </div>\n                    <div class=\"thumbnail\" title=\"点击图片重新获取验证码\" @click=\"getCaptcha\">\n                        <div class=\"captcha vcenter\" v-html=\"captchaTpl\"></div>\n                    </div>\n                    <span @click=\"register\">\n                        <button type=\"submit\" class=\"btn btn-lg btn-success btn-block\">\n                            <i class=\"fa fa-btn fa-sign-in\"></i> 注册\n                        </button>\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import createCaptcha from '@/utils/createCaptcha'\n    // 引入\n    import { register } from '@/api/auth.js'\n    import router from \"../../router\";\n\n    export default {\n        name: 'Register',\n        data() {\n            return {\n                captchaTpl: '', // 验证码模板\n                username: '', // 用户名\n                password: '', // 密码\n                cpassword: '', // 确认密码\n                captcha: '', // 验证码\n                msg: '', // 消息\n                msgType: '', // 消息类型\n                msgShow: false // 是否显示消息，默认不显示\n            }\n        },\n        created() {\n            this.getCaptcha()\n        },\n        methods: {\n            getCaptcha() {\n                const {tpl, captcha} = createCaptcha(6)\n\n                this.captchaTpl = tpl\n                this.localCaptcha = captcha\n            },\n            register(e) {\n                this.$nextTick(() => {\n                    const target = e.target.type === 'submit' ? e.target : e.target.parentElement\n\n                    if (target.canSubmit) {\n                        this.submit()\n                    }\n                })\n            },\n            submit() {\n                if (this.captcha.toUpperCase() !== this.localCaptcha) {\n                    this.showMsg('验证码不正确')\n                    this.getCaptcha()\n                } else {\n                    const user = {\n                        name: this.username,\n                        password: this.password\n                        // avatar: `https://img2.baidu.com/it/u=211113848,1401293897&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=500`\n                    }\n\n                    register(user).then((res) => {\n                        // this.login(user)\n                        this.showMsg('注册成功')\n                        // 跳转到登录页\n                        router.push('/auth/login')\n                    }).catch(err => {\n                        this.showMsg('用户名已存在')\n                    });\n                }\n            },\n            login(user) {\n                // 分发 login 事件，以保存用户信息和登录\n                this.$store.dispatch('login', user)\n                this.showMsg('注册成功', 'success')\n            },\n            showMsg(msg, type = 'warning') {\n                this.msg = msg\n                this.msgType = type\n                this.msgShow = false\n\n                this.$nextTick(() => {\n                    this.msgShow = true\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n    .thumbnail {\n        width: 170px;\n        margin-top: 10px;\n        cursor: pointer;\n    }\n\n    .thumbnail .captcha {\n        height: 46px;\n        background: #E1E6E8;\n    }\n\n    .captcha {\n        font-size: 24px;\n        font-weight: bold;\n        user-select: none;\n    }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=61647f72&scoped=true&\"\nimport script from \"./Register.vue?vue&type=script&lang=js&\"\nexport * from \"./Register.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=61647f72&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61647f72\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request.js'\n\n// 分别暴露的方式暴露内容\nexport const register = (data) => {\n    // 返回请求的数据\n    return request({\n        // 配置请求方式\n        method: 'POST',// GET/POSH\n        // 请求接口地址\n        url: '/h5users',\n        // 要传递的参数\n        data: data\n    })\n}\n\n// 分别暴露的方式暴露内容\nexport const login = (data) => {\n    // 返回请求的数据\n    return request({\n        // 配置请求方式\n        method: 'POST',// GET/POSH\n        // 请求接口地址\n        url: '/web/authorizations',\n        // 要传递的参数\n        data: data\n    })\n}"],"names":["render","_vm","this","_c","_self","staticClass","attrs","msgShow","msgType","msg","on","$event","_m","_v","directives","name","rawName","value","username","expression","modifiers","regex","error","arg","domProps","target","composing","trim","$forceUpdate","password","cpassword","captcha","title","getCaptcha","_s","captchaTpl","register","staticRenderFns","num","letters","tpl","Array","map","Math","floor","random","length","e","forEach","item","join","data","created","methods","submit","router","catch","err","login","showMsg","component","request","method","url"],"sourceRoot":""}