"use strict";(self["webpackChunkvuejs_essential"]=self["webpackChunkvuejs_essential"]||[]).push([[514],{9514:function(a,t,s){s.r(t),s.d(t,{default:function(){return v}});var e=function(){var a=this,t=a._self._c;return t("div",{staticClass:"col-md-9 left-col"},[t("div",{staticClass:"panel panel-default padding-md"},[t("div",{staticClass:"panel-body"},[a._m(0),t("hr"),t("div",{attrs:{"data-validator-form":""}},[t("div",{staticClass:"form-group"},[t("label",[a._v("头像预览：")]),t("div",[t("img",{staticClass:"avatar-preview-img",attrs:{src:a.avatar}})])]),t("div",{staticClass:"form-group row"},[t("div",{staticClass:"col-md-8"},[t("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:a.avatar,expression:"avatar",modifiers:{trim:!0,lazy:!0}},{name:"validator",rawName:"v-validator.required",value:{title:"头像地址"},expression:"{ title: '头像地址' }",modifiers:{required:!0}}],staticClass:"form-control avatar-input",attrs:{type:"text"},domProps:{value:a.avatar},on:{change:function(t){a.avatar=t.target.value.trim()},blur:function(t){return a.$forceUpdate()}}})]),t("div",{staticClass:"clearfix"})]),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-lg btn-primary",attrs:{type:"submit"},on:{click:a.updateAvatar}},[a._v("上传头像")])])])])])])},r=[function(){var a=this,t=a._self._c;return t("h2",[t("i",{staticClass:"fa fa-picture-o"}),a._v(" 请输入头像地址")])}],i=s(2900),l={name:"EditAvatar",data(){return{avatar:""}},created(){const a=this.$store.state.user;a&&"object"===typeof a&&(this.avatar=a.avatar)},methods:{updateAvatar(){const a=this.avatar;if(a){let t=new Image;t.onload=()=>{(0,i.Nq)({avatar:a}).then((t=>{this.$store.dispatch("updateUser",{avatar:a}),this.$message.show("上传成功")})).catch((()=>{this.$message.show("上传失败","danger")}))},t.onerror=()=>{this.$message.show("上传失败","danger")},t.src=a}}}},o=l,n=s(1001),c=(0,n.Z)(o,e,r,!1,null,"2b31c2dc",null),v=c.exports}}]);
//# sourceMappingURL=514.bce0fecc.js.map